#!/bin/sh

function git_info() {
  git rev-parse --is-inside-work-tree &>/dev/null || return
  branch=$(git symbolic-ref -q HEAD | sed -e 's|^refs/heads/||')
  dirty=$(git diff --quiet --ignore-submodules HEAD &>/dev/null; [ $? -eq 1 ] && echo -e "*")

  echo " ("$branch$dirty")"
}

function git_update() {
  currentWordDir=$(pwd)

  for dir in $HOME/code/*; do
    cd $dir
    if [[ `git rev-parse --is-inside-work-tree &>/dev/null` ]]; then
      git pull && git push
    fi
  done

  cd $currentWordDir
}